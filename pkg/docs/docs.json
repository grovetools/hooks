{
  "sections": {
    "command-reference": {
      "title": "Command Reference",
      "content": "This document provides a reference for the `grove-hooks` command-line interface, covering all subcommands and their options.",
      "subsections": [
        {
          "title": "Hook Execution Mechanism",
          "content": "`grove-hooks` is an integration tool for the Claude Code agent. Its functions are executed in two ways:\n\n1.  **Via Symlinks:** When installed in a repository, `grove-hooks` is called by the Claude agent through symlinks (e.g., `pretooluse`, `stop`). The binary inspects how it was called (`os.Args[0]`) and runs the corresponding hook logic, receiving a JSON payload on standard input.\n2.  **Directly:** Users can run `grove-hooks` with subcommands (e.g., `grove-hooks sessions list`) to manage and inspect the data collected by the hooks."
        },
        {
          "title": "`grove-hooks install`",
          "content": "Initializes the hook configuration within a repository.\n\n### Syntax\n\n\n### Description\n\nThe `install` command configures a repository to use `grove-hooks`. It creates a `.claude` directory if one does not exist and then creates or updates the `.claude/settings.local.json` file. This file is modified to direct Claude Code's hook events (such as tool usage and session completion) to the `grove-hooks` binary.\n\nExisting settings in the file are preserved, but the `hooks` section is overwritten with the `grove-hooks` configuration.\n\n### Flags\n\n| Flag | Shorthand | Description | Default |\n| :--- | :--- | :--- | :--- |\n| `--directory` | `-d` | The target repository directory to install hooks in. | `.` |\n\n### Example",
          "code_blocks": [
            "grove-hooks install [flags]",
            "# Install hooks in the current directory\ngrove-hooks install\n\n# Install hooks in a specific project directory\ngrove-hooks install --directory ~/projects/my-app"
          ]
        },
        {
          "title": "`grove-hooks sessions`",
          "content": "Manages and queries locally stored AI agent sessions. Session data is stored in a local SQLite database located at `~/.local/share/grove-hooks/state.db`.\n\n### `grove-hooks sessions list`\n\nLists all tracked sessions in a table format.\n\n#### Syntax\n\n\n#### Description\n\nThis command displays a summary of all sessions recorded by `grove-hooks`, including interactive Claude sessions and automated `grove-flow` jobs. It discovers sessions from multiple sources: `grove-flow` markdown files, live session directories (`~/.grove/hooks/sessions/`), and the local SQLite database. The output is sorted to show active sessions first.\n\n#### Flags\n\n| Flag | Shorthand | Description |\n| :--- | :--- | :--- |\n| `--active` | | Show only active sessions (hides `completed`, `failed`, `error`). |\n| `--json` | | Output the full session data as a structured JSON array. |\n| `--limit` | `-l` | Limit the number of sessions returned. |\n| `--status` | `-s` | Filter by status (e.g., `running`, `idle`, `completed`). |\n| `--plan` | `-p` | Filter by `grove-flow` plan name. |\n| `--type` | `-t` | Filter by type (e.g., `claude_code`, `chat`, `oneshot`, `agent`). |\n\n#### Example\n\n\n#### Example Output\n\n\n- **CONTEXT**: Shows repository and worktree for Claude sessions, or project and job title for `grove-flow` jobs.\n- **AGE**: For active sessions, this is the time since last activity. For terminal sessions, it is the total execution duration.\n\n### `grove-hooks sessions get`\n\nRetrieves and displays detailed information for a specific session.\n\n#### Syntax\n\n\n#### Description\n\nUse this command to inspect the full details of a single session, including its type, status, repository context, timing information, and collected tool usage statistics.\n\n#### Arguments\n\n| Argument | Description |\n| :--- | :--- |\n| `\u003csession-id\u003e` | The unique identifier of the session. |\n\n#### Flags\n\n| Flag | Description |\n| :--- | :--- |\n| `--json` | Output the session details as a JSON object. |\n\n#### Example\n\n\n### `grove-hooks sessions tui`\n\nLaunches an interactive terminal UI to browse, search, and manage sessions.\n\n#### Syntax\n\n*Aliases: `browse`, `b`*\n\n#### Description\n\nThe `tui` command provides a full-screen, real-time view of all sessions, grouped by workspace. It allows for dynamic filtering, searching, and inspecting sessions. Data is refreshed automatically.\n\n#### Keybindings\n\n| Key | Action |\n| :--- | :--- |\n| `↑`/`↓` | Navigate the session list. |\n| `/` | Start typing to filter sessions by any text content. `Esc` to exit search. |\n| `f` | Open the filter view to toggle statuses and types. |\n| `t` | Toggle between table and tree views. |\n| `Enter`/`o`/`e` | Perform context-aware action (view details, open session, edit job). |\n| `Space` | Select or deselect one or more sessions. |\n| `Ctrl+A` | Select or deselect all currently visible sessions. |\n| `Ctrl+X` | Archive all selected sessions. |\n| `Ctrl+Y` | Copy the selected session ID to the clipboard. |\n| `Ctrl+O` | Open the session's working directory in the file manager. |\n| `Ctrl+J` | Export the selected session's data to a JSON file in the current directory. |\n| `Ctrl+K` | Kill the selected Claude session process. |\n| `q`/`Esc`/`Ctrl+C` | Exit the application. |\n\n### `grove-hooks sessions cleanup`\n\nManually triggers a cleanup of inactive or dead sessions.\n\n#### Syntax\n\n\n#### Description\n\nThis command finds sessions that are marked as `running` or `idle` but whose corresponding process has terminated or has been inactive for an extended period. It marks these sessions as `completed` or `interrupted`. This process runs automatically with `list` and `tui`, but can be invoked manually if needed.\n\n#### Flags\n\n| Flag | Description | Default |\n| :--- | :--- | :--- |\n| `--inactive-minutes` | Minutes of inactivity before marking a session as completed. | `30` |\n\n### `grove-hooks sessions archive`\n\nArchives one or more sessions by marking them as deleted in the database.\n\n#### Syntax\n\n#### Description\nArchived sessions are hidden from normal queries. You can archive specific sessions by providing their IDs, or use flags to archive sessions in bulk based on their status.\n\n#### Flags\n| Flag | Description |\n| :--- | :--- |\n| `--all` | Archive all sessions regardless of status. |\n| `--completed` | Archive only completed sessions. |\n| `--failed` | Archive only failed sessions. |\n| `--running` | Archive only running sessions. |\n| `--idle` | Archive only idle sessions. |\n\n### `grove-hooks sessions kill`\n\nTerminates a running Claude session process.\n\n#### Syntax\n#### Description\nThis command sends a `SIGTERM` signal to the process associated with a Claude session and cleans up its session directory. This action is immediate and cannot be undone. It does not apply to `grove-flow` jobs.\n\n#### Flags\n| Flag | Shorthand | Description |\n| :--- | :--- | :--- |\n| `--force` | `-f` | Skip the confirmation prompt before killing the process. |\n\n### `grove-hooks sessions mark-interrupted`\nFinds and marks stale `grove-flow` jobs as interrupted.\n\n#### Syntax\n#### Description\nThis utility scans for `grove-flow` job files (`.md`) with a status of `running`. If a job's corresponding `.lock` file is missing or contains the PID of a dead process, it updates the job's frontmatter status to `interrupted`.\n\n#### Flags\n| Flag | Description |\n| :--- | :--- |\n| `--dry-run` | Show which job files would be updated without making changes. |\n\n### `grove-hooks sessions mark-old-completed`\nBulk-updates the status of old jobs to `completed`.\n\n#### Syntax\n#### Description\nThis command finds `grove-flow` jobs and chats that are not in a terminal state (e.g., `running`, `idle`) and were created before a specified date. It then updates their frontmatter status to `completed`.\n\n#### Flags\n| Flag | Description | Default |\n| :--- | :--- | :--- |\n| `--before` | Mark jobs created before this date (YYYY-MM-DD). | Today |\n| `--dry-run` | Show which job files would be updated without making changes. | |\n\n### `grove-hooks sessions set-status`\nDirectly sets the status field in a `grove-flow` job's frontmatter.\n\n#### Syntax\n#### Arguments\n| Argument | Description |\n| :--- | :--- |\n| `\u003cjob-file-path\u003e` | Path to the job's `.md` file. |\n| `\u003cstatus\u003e` | The new status to set (e.g., `pending`, `running`, `completed`). |",
          "code_blocks": [
            "grove-hooks sessions list [flags]",
            "# List the 10 most recent active sessions\ngrove-hooks sessions list --active --limit 10",
            "SESSION ID    TYPE           STATUS        CONTEXT                         USER    AGE\n\u003cuuid\u003e...     claude_code    running       my-repo (wt:feature-branch)     matt    3m10s\n\u003cuuid\u003e...     job            completed     my-project:Refactor Database    matt    5s",
            "grove-hooks sessions get \u003csession-id\u003e [flags]",
            "grove-hooks sessions get 018f2b3e-a1b2-c3d4-e5f6-123456789abc",
            "grove-hooks sessions tui",
            "grove-hooks sessions cleanup [flags]",
            "grove-hooks sessions archive [session-id...] [flags]",
            "grove-hooks sessions kill \u003csession-id\u003e [flags]",
            "grove-hooks sessions mark-interrupted [flags]",
            "grove-hooks sessions mark-old-completed [flags]",
            "grove-hooks sessions set-status \u003cjob-file-path\u003e \u003cstatus\u003e"
          ]
        },
        {
          "title": "`grove-hooks version`",
          "content": "Prints the version information for the `grove-hooks` binary.\n\n### Syntax\n\n\n### Flags\n\n| Flag | Description |\n| :--- | :--- |\n| `--json` | Output the version information as a JSON object. |",
          "code_blocks": [
            "grove-hooks version [flags]"
          ]
        },
        {
          "title": "Programmatic Hook Commands",
          "content": "These subcommands are the direct entry points for Claude's hook system and are not intended for direct user interaction. They expect a JSON payload on standard input.\n\n| Command | Trigger | Purpose |\n| :--- | :--- | :--- |\n| `pretooluse` | Before a tool is executed. | Creates session record, logs tool attempt. |\n| `posttooluse`| After a tool is executed. | Updates tool execution record with result and duration. |\n| `notification`| On an agent notification. | Logs notification events. |\n| `stop` | When an agent session ends a turn or completes. | Updates session status to `idle` or `completed`. |\n| `subagent-stop`| When a sub-agent completes a task. | Logs sub-agent task completion. |"
        },
        {
          "title": "Environment Variables",
          "content": "| Variable | Description |\n| :--- | :--- |\n| `GROVE_HOOKS_DB_PATH` | Specifies a custom path to the SQLite database file. |\n| `GROVE_DEBUG` | If set, enables additional verbose logging to stderr. |\n| `XDG_DATA_HOME` | If set, the database and session directories will be stored in `$XDG_DATA_HOME/grove-hooks/` instead of `~/.local/share/grove-hooks/`. |"
        }
      ]
    },
    "configuration": {
      "title": "Configuration",
      "content": "`grove-hooks` uses a hook system to execute commands at specific points in an AI agent's lifecycle. Configuration is handled through files in the host application's directory, a repository-specific file, and environment variables.",
      "subsections": [
        {
          "title": "Configuration Mechanisms",
          "content": "There are two primary file-based configuration contexts.\n\n### 1. Host Application Integration\n\nThe `grove-hooks` binary is invoked by a host application (e.g., `claude-code`). The `grove-hooks install` command automates this setup.\n\n\nThis command creates or modifies `.claude/settings.local.json`. This file instructs the host application to execute a specific `grove-hooks` subcommand when a corresponding event occurs.\n\n**Example `.claude/settings.local.json`:**\n\n\n### 2. Repository-Specific Hooks\n\nThe `hooks` section in a project's `grove.yml` (or `.grove.yml`) can define shell commands to be executed when a session stops. This is used for actions like running linters, tests, or cleanup scripts.\n\n**Example `grove.yml`:**\n\n\n-   **`on_stop`**: A list of commands to run when the `stop` hook is triggered for a session in this repository.\n-   **`name`**: A descriptive name for the command.\n-   **`command`**: The shell command to execute.\n-   **`run_if`**: (Optional) A condition for execution. The only current value is `\"changes\"`, which runs the command only if `git status` reports uncommitted changes.\n\nIf a command in `on_stop` exits with code `2`, it is treated as a blocking error. The error message from the command's stderr is passed back to the host application, which may prevent the session from closing.",
          "code_blocks": [
            "# In a project's root directory\ngrove-hooks install",
            "{\n  \"hooks\": {\n    \"PreToolUse\": [{\n      \"matcher\": \".*\",\n      \"hooks\": [{\"type\": \"command\", \"command\": \"grove-hooks pretooluse\"}]\n    }],\n    \"PostToolUse\": [{\n      \"matcher\": \"(Edit|Write|MultiEdit|Bash|Read)\",\n      \"hooks\": [{\"type\": \"command\", \"command\": \"grove-hooks posttooluse\"}]\n    }],\n    \"Stop\": [{\n      \"matcher\": \".*\",\n      \"hooks\": [{\"type\": \"command\", \"command\": \"grove-hooks stop\"}]\n    }]\n  }\n}",
            "hooks:\n  on_stop:\n    - name: \"Show Git Status\"\n      command: \"git status\"\n      run_if: \"changes\"\n    - name: \"Run Linter\"\n      command: \"make lint\""
          ]
        },
        {
          "title": "Hook Event Reference",
          "content": "`grove-hooks` responds to events triggered by the host application. Each event corresponds to a subcommand that receives a JSON payload via stdin.\n\n-   **`PreToolUse`**\n    -   **Trigger**: Before the agent executes a tool.\n    -   **Action**: Records the session's start time, working directory, and tool parameters in a local SQLite database.\n\n-   **`PostToolUse`**\n    -   **Trigger**: After a tool has been executed.\n    -   **Action**: Records the tool's output, execution duration, and success or failure status. The `tool_error` field in the input JSON is logged if present.\n\n-   **`Notification`**\n    -   **Trigger**: When the agent generates a notification message.\n    -   **Action**: Logs the notification content.\n\n-   **`Stop`**\n    -   **Trigger**: When a session ends for any reason (e.g., completion, interruption).\n    -   **Action**: Updates the final session status in the database. Executes `on_stop` commands defined in the `hooks` section of `grove.yml` if present in the session's working directory.\n\n-   **`SubagentStop`**\n    -   **Trigger**: When a sub-agent completes a delegated task.\n    -   **Action**: Logs the sub-agent's task, status, and result."
        },
        {
          "title": "Environment Variables",
          "content": "-   **`GROVE_HOOKS_DB_PATH`**: Overrides the default path to the SQLite database (`~/.local/share/grove-hooks/state.db`). Used primarily for test isolation.\n-   **`GROVE_DEBUG`**: If set to a non-empty string, enables verbose debug logging to stderr.\n-   **`GROVE_FLOW_JOB_ID`**: When a session is initiated by `grove-flow`, this variable links the Claude session to a specific flow job ID for unified tracking.\n-   **`XDG_DATA_HOME`**: If set, `grove-hooks` stores its database and session artifacts in `$XDG_DATA_HOME/grove-hooks/` and `$XDG_DATA_HOME/hooks/` respectively, following the XDG Base Directory Specification."
        },
        {
          "title": "Common Use Cases and Limitations",
          "content": "### Use Cases\n\n-   **Session Auditing**: The primary function is to create a local, queryable record of all agent activity. `grove-hooks sessions list` and `grove-hooks browse` provide interfaces to this data.\n-   **Performance Monitoring**: The `PostToolUse` and `Stop` hooks receive `duration_ms` fields, which are logged to the database. This data can be used to analyze tool and session performance.\n-   **Post-Session Automation**: Using the `hooks` section in `grove.yml`, you can define commands that run automatically when an agent session concludes, such as code validation or status notifications.\n\n### Limitations\n\n-   **No Direct LLM Instrumentation**: `grove-hooks` does not monitor raw API requests or responses to an LLM. It operates at the level of \"tool use\" events as reported by the host application.\n-   **Local Scope**: All data is stored in a local SQLite database on the user's machine. It is not designed for centralized, multi-user observability."
        }
      ]
    },
    "examples": {
      "title": "Examples",
      "content": "This document provides practical examples for using `grove-hooks`.",
      "subsections": [
        {
          "title": "Example 1: Basic Session Monitoring",
          "content": "This example covers installing `grove-hooks` in a project and monitoring an interactive AI agent session.\n\n1.  **Install Hooks in a Project**\n\n    Navigate to the project's root directory and run the `install` command.\n\n    ```bash\n    # In your project's root directory\n    grove-hooks install\n    ```\n\n    This command creates or modifies `.claude/settings.local.json`, configuring the agent driver (e.g., Claude CLI) to send lifecycle events to `grove-hooks`.\n\n2.  **Start an Agent Session**\n\n    Begin a development session using an integrated tool.\n\n    ```bash\n    claude -p \"Refactor the main database connection logic.\"\n    ```\n\n    When the session starts and the agent first uses a tool, `grove-hooks` creates a new session record in its local SQLite database and tracks its process ID (PID) via a lock file in `~/.grove/hooks/sessions/`.\n\n3.  **List Active Sessions**\n\n    While the session is running, open another terminal and use `grove-hooks sessions list`. The `--active` flag hides sessions that are already completed or have failed.\n\n    ```bash\n    grove-hooks sessions list --active\n    ```\n\n    **Expected Output:**\n\n    ```\n    SESSION ID      TYPE          STATUS     CONTEXT              USER    AGE\n    c2e5a7b1b3f9    claude_code   running    my-project (wt:main) myuser  3m15s\n    ```\n\n    The output shows the session's type, its `running` status, and the repository context, including the worktree or branch. The `AGE` column indicates the time since the session's last activity."
        },
        {
          "title": "Example 2: Advanced Analysis",
          "content": "This example demonstrates how to investigate a specific session's history and export its data.\n\n1.  **Find a Specific Session**\n\n    To find a session that has finished its turn but is awaiting further input, filter the list by the `idle` status.\n\n    ```bash\n    grove-hooks sessions list --status idle\n    ```\n\n    **Expected Output:**\n\n    ```\n    SESSION ID      TYPE          STATUS     CONTEXT                    USER    AGE\n    a9b8c7d6e5f4    claude_code   idle       api-refactor (wt:feat...)  myuser  15m30s\n    ```\n\n2.  **Get Detailed Information**\n\n    Use the `sessions get` command with the session ID to retrieve the full record, including tool usage statistics.\n\n    ```bash\n    grove-hooks sessions get a9b8c7d6e5f4\n    ```\n\n    **Expected Output:**\n\n    ```\n    Session ID: a9b8c7d6e5f4...\n    Type: claude_code\n    Status: idle\n    Repository: api-refactor\n    Branch: feature/new-auth\n    User: myuser\n    Working Directory: /home/dev/projects/api-refactor\n    PID: 12345\n    Started: 2023-10-27T11:00:00Z\n    Ended: \u003cnil\u003e\n    Duration: 15m30.001s\n    Tmux Key: api-refactor\n\n    Tool Statistics:\n      Total Calls: 5\n      Bash Commands: 2\n      File Modifications: 3\n      File Reads: 8\n      Search Operations: 1\n    ```\n\n    This output provides the working directory, PID, user, timing information, and a summary of tool usage, which is useful for debugging agent behavior or understanding task complexity.\n\n3.  **Export Data as JSON**\n\n    To perform programmatic analysis or archive session data, export the full record as JSON.\n\n    ```bash\n    grove-hooks sessions list --limit 1 --json\n    ```\n\n    **Expected Output (Truncated):**\n\n    ```json\n    [\n      {\n        \"id\": \"a9b8c7d6e5f4...\",\n        \"type\": \"claude_code\",\n        \"status\": \"idle\",\n        \"repo\": \"api-refactor\",\n        \"branch\": \"feature/new-auth\",\n        ...\n        \"duration_seconds\": null,\n        \"duration_human\": \"\",\n        \"age_seconds\": 930.001,\n        \"age_human\": \"15m30s\",\n        \"last_activity_seconds_ago\": 930.001,\n        \"last_activity_human\": \"15m30s\"\n      }\n    ]\n    ```\n    The JSON output includes structured data with both machine-readable (seconds) and human-readable time formats."
        },
        {
          "title": "Example 3: Grove Integration",
          "content": "This example shows how `grove-hooks` provides unified observability for activities orchestrated by `grove-flow` alongside interactive sessions.\n\n1.  **Create and Run a Grove Flow Plan**\n\n    Use `grove-flow` to define and execute an automated job. `grove-flow` is configured to report job status, allowing `grove-hooks` to discover and track it.\n\n    ```bash\n    # In a project configured for grove-flow\n    # Initialize a new plan\n    flow plan init new-feature-docs\n\n    # Add a 'oneshot' job to generate documentation\n    flow plan add new-feature-docs --title \"Generate API Docs\" --type oneshot \\\n      -p \"Generate OpenAPI documentation for the new endpoints in user_controller.go\"\n\n    # Run the plan\n    flow plan run new-feature-docs --yes\n    ```\n\n2.  **View the Unified Session List**\n\n    While the `flow` plan is running or after it has completed, use `grove-hooks` to view all tracked activities.\n\n    ```bash\n    grove-hooks sessions list\n    ```\n\n    **Expected Output:**\n\n    ```\n    SESSION ID      TYPE          STATUS       CONTEXT                         USER    AGE\n    gen-api-docs    job           completed    api-refactor (wt:feat...):Ge... myuser  1m5s\n    c2e5a7b1b3f9    claude_code   running      my-project (wt:main)            myuser  12m5s\n    ```\n\n    The list includes entries for both interactive (`claude_code`) and automated (`job`) sessions. For `job` type entries, the `CONTEXT` column displays the repository and job title. This provides a single location to monitor all AI-driven activity.\n\n3.  **Browse All Sessions Interactively**\n\n    The `sessions browse` command (alias: `tui`) launches a terminal user interface for filtering and exploring all discovered sessions and their associated workspaces.\n\n    ```bash\n    grove-hooks sessions browse\n    ```\n\n    This interface organizes sessions within a workspace hierarchy and provides keybindings for navigation and actions:\n    *   **Tree View**: Sessions are nested under their respective projects, worktrees, and `grove-flow` plans.\n    *   **Filtering**: Press `f` to toggle status/type filters.\n    *   **Search**: Press `/` to search across all session metadata.\n    *   **Actions**: Press `enter` to view details, `o` to open a running session's tmux window, or `e` to edit a job's source file."
        }
      ]
    },
    "overview": {
      "title": "Overview",
      "content": "`hooks` captures lifecycle events from local AI agent sessions and job execution tools. It serves as a connector between agent activities, the filesystem, and the `grove` ecosystem.",
      "subsections": [
        {
          "title": "Core Mechanisms",
          "content": "**Execution Model**: Tools like Claude Code and OpenCode can be configured to execute the `hooks` binary at specific lifecycle events, passing JSON payloads via standard input. The process parses the event, updates the local SQLite database at `~/.local/state/grove/hooks/sessions.db`, and exits.\n\n**Session Discovery**: The tool aggregates session data from three sources:\n*   **Active Processes**: Scans filesystem PIDs and lock files to determine liveness for interactive agents.\n*   **Grove `flow` Jobs**: Scans workspace directories for Markdown files containing YAML frontmatter.\n*   **OpenCode**: Reads session history from `~/.local/share/opencode/storage/`.\n\n**State Management**: Session states (`running`, `idle`, `completed`, `failed`) are derived from process liveness checks (PID existence) and metadata updates. For `flow` jobs, status is determined by validating the existence of a corresponding `.lock` file and the active process it references."
        },
        {
          "title": "Features",
          "content": "### Terminal Interface (TUI)\nThe `tui` command renders a hierarchical view of active and historical sessions.\n*   **Structure**: Groups sessions by ecosystem, project, and worktree.\n*   **Navigation**: Supports filtering by status or type and provides shortcuts to attach to associated `tmux` sessions.\n*   **Visual Indicators**: Displays session age, status icons, and job types.\n\n### Repository Hooks\nProjects can define custom lifecycle actions via the `hooks` section in `grove.yml`.\n*   **On Stop**: Executes shell commands when a session ends (e.g., linting, cleanup).\n*   **Conditions**: Commands can be conditional (e.g., `run_if: changes` checks for git modifications).\n\n### Plan Preservation\nThe tool automatically synchronizes plans generated by Claude Code's \"Plan Mode\" with `flow`'s Plan.\n*   **Capture**: Listens for `ExitPlanMode` and `Edit` tool events.\n*   **Sync**: Extracts plan content and saves it as a `flow` compatible Markdown job file.\n*   **Configuration**: Controlled via `grove.yml` or environment variables (e.g., `GROVE_HOOKS_ENABLE_PLAN_PRESERVATION`)."
        },
        {
          "title": "Integrations",
          "content": "### Claude Code\nThe `install` command configures Claude Code to call `grove hooks` commands at lifecycle events. It can install hooks in two locations:\n\n*   **Local (default)**: Modifies `.claude/settings.local.json` in the target directory.\n*   **Global**: With `--global` flag, modifies `~/.claude/settings.json` for system-wide hooks.\n\nThe install process is non-disruptive: it merges Grove hooks into existing configuration, preserving any custom hooks already defined. It registers the following events:\n*   `PreToolUse`: Runs before any tool execution\n*   `PostToolUse`: Runs after Edit, Write, MultiEdit, Bash, or Read tools\n*   `Notification`: Runs on Claude Code notifications\n*   `Stop`: Runs when the conversation stops\n*   `SubagentStop`: Runs when a subagent completes\n\n### OpenCode\nThe `opencode install` command writes a TypeScript plugin (`grove-integration.ts`) to `~/.config/opencode/plugin/`. This plugin utilizes the OpenCode API to report lifecycle events to the hooks database.\n\n### System Notifications\nThe tool can send desktop notifications for specific events, such as when a background job pauses for user input or a long-running task completes. Configuration is handled via the central `grove` configuration."
        }
      ]
    }
  }
}